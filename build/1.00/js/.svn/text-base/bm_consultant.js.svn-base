/*
 * Build by xuelei.kong@autostreets.com
 * Date: 2016-04-07 10:30:42
 * Version: 1.00
 */
function preventScroll(e){e.preventDefault()}function loadpro(){document.body.removeEventListener("touchmove",preventScroll),$(".select-type li").removeClass("curr");var e=$("#type-1 a").attr("selectname");("品牌"==e||null==e)&&(e="");var t=$("#type-2 a").attr("selecetval");("城市"==t||null==t)&&(t="");var a=$("#type-4 a").attr("selecetval");("0"==a||null==a)&&(a="");var o=$("#type-3 a").attr("selecetval");("0"==o||null==o)&&(o="");var n=ListUrl+"&brand="+e+"&city="+t+"&price="+a+"&age="+o+"&current="+page;$.ajax({type:"GET",url:n,dataType:"jsonp",jsonp:"jsoncallback",scriptCharset:"GBK",jsonpCallback:"getlist1",cache:!1,beforeSend:function(){$("#loading").show()},success:function(e){e.data.length>0?(1==page&&$("#consultant_list").empty(),$.each(e.data,function(e,t){var a=t.price;a=t.hidden?"面议":"&yen; "+a/1e4+"万元";var o=$("<li><span class='prolist_img'><img src='"+imgurl+t.firstPhotoUrl+"'></span><h3>"+t.brand+" "+t.vehicleModel+" "+t.selledName+"</h3><p>"+t.currentCity+"<ins>|</ins>"+new Date(t.registerLicenseDate).Format("yyyy年M月")+"<ins>|</ins>"+t.displayMileage+"万公里<ins>|</ins>"+t.licenseCodeDisplay+"</p><strong>"+a+"</strong></li>");o.click(function(){window.location.href=siteurl+"/usedcar/competitive_detail.html?id="+t.sid}),$("#consultant_list").append(o),power="0"})):(1==page&&($("#consultant_list").empty(),$("#consultant_list").append("<li class='nodata'>抱歉，没有符合条件的顾问</li>")),power="1"),$("#loading").hide()}})}function getScrollTop(){var e=0,t=0,a=0;return document.body&&(t=document.body.scrollTop),document.documentElement&&(a=document.documentElement.scrollTop),e=t-a>0?t:a}function getScrollHeight(){var e=0,t=0,a=0;return document.body&&(t=document.body.scrollHeight),document.documentElement&&(a=document.documentElement.scrollHeight),e=t-a>0?t:a}function getWindowHeight(){var e=0;return e="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight}var ListUrl="http://wap.autostreets.com/noHaggle/list",paramListUrl="http://wap.autostreets.com/noHaggle/getParamsForList",imgurl="http://images.autostreets.com/",caelogoimg="http://img.autostreetscdn.com/",siteurl="http://wap.autostreets.com/html/",page=1,isload="0",power="0";$(function(){function e(e){if("ontouchstart"in document){var t=(document.getElementById(e),0);document.getElementById(e).addEventListener("touchstart",function(e){t=this.scrollTop+e.touches[0].pageY},!1),document.getElementById(e).addEventListener("touchmove",function(e){this.scrollTop=t-e.touches[0].pageY},!1)}}$.ajax({type:"GET",url:paramListUrl,dataType:"jsonp",jsonp:"jsoncallback",scriptCharset:"GBK",jsonpCallback:"getlist",cache:!1,success:function(e){var t=e.data;$("#typebox-1 ul").empty(),$.each(t.brandList,function(e,t){var a=$("<li><a href='javascript:;' selectname='"+t.name+"'><img src='"+caelogoimg+t.logoUrl+"'>"+t.name+"</a></li>");a.click(function(){var e=$(this).children("a").attr("selectname");e.length>4&&(e=e.substr(0,3)+"..."),$("#type-1 a").html(e).attr("selectname",$(this).children("a").attr("selectname")),$(this).parent().parent().find("a").removeClass("on"),$(this).children("a").addClass("on"),$("#typebox-1,#tipbg").hide(),loadpro()}),$("#typebox-1 ul").append(a)}),$("#typebox-2 ul").empty(),$.each(t.cityList,function(e,t){var a=$("<li><a href='javascript:;' selecetval ='"+t.name+"'>"+t.name+"</a></li>");a.click(function(){var e=$(this).children("a").attr("selecetval");e.length>4&&(e=e.substr(0,3)+"..."),$("#type-2 a").html(e).attr("selecetval",$(this).children("a").attr("selecetval")),$(this).parent().parent().find("a").removeClass("on"),$(this).children("a").addClass("on"),$("#typebox-2,#tipbg").hide(),loadpro()}),$("#typebox-2 ul").append(a)}),$("#typebox-4 ul").empty(),$.each(t.price,function(e,t){var a=$("<li><a href='javascript:;' selecetval='"+e+"' selectname='"+t+"'>"+t+"</a></li>");a.click(function(){$("#type-4 a").html($(this).children("a").attr("selectname")),$("#type-4 a").attr("selecetval",$(this).children("a").attr("selecetval")),$(this).parent().parent().find("a").removeClass("on"),$(this).children("a").addClass("on"),$("#typebox-4,#tipbg").hide(),loadpro()}),$("#typebox-4 ul").append(a)}),$("#typebox-3 ul").empty(),$.each(t.ageMap,function(e,t){var a=$("<li><a href='javascript:;' selecetval='"+e+"' selectname='"+t+"'>"+t+"</a></li>");a.click(function(){$("#type-3 a").html($(this).children("a").attr("selectname")),$("#type-3 a").attr("selecetval",$(this).children("a").attr("selecetval")),$(this).parent().parent().find("a").removeClass("on"),$(this).children("a").addClass("on"),$("#typebox-3,#tipbg").hide(),loadpro()}),$("#typebox-3 ul").append(a)})}}),$("#type-1").click(function(){document.body.addEventListener("touchmove",preventScroll),$("#typebox-1,#typebox-2,#typebox-3,#typebox-4").hide(),$("#typebox-1,#tipbg").show(),$("#loading").hide(),page=1}),$("#type-2").click(function(){document.body.addEventListener("touchmove",preventScroll),$("#typebox-1,#typebox-2,#typebox-3,#typebox-4").hide(),$("#typebox-2,#tipbg").show(),$("#loading").hide(),page=1}),$("#type-3").click(function(){document.body.addEventListener("touchmove",preventScroll),$("#typebox-1,#typebox-2,#typebox-3,#typebox-4").hide(),$("#typebox-3,#tipbg").show(),$("#loading").hide(),page=1}),$("#type-4").click(function(){document.body.addEventListener("touchmove",preventScroll),$("#typebox-1,#typebox-2,#typebox-3,#typebox-4").hide(),$("#typebox-4,#tipbg").show(),$("#loading").hide(),page=1}),$("#typebox-1-all").click(function(){$("#type-1 a").html($(this).html()),$(this).parent().parent().find("a").removeClass("on"),$(this).addClass("on"),$("#typebox-1,#tipbg").hide(),$("#type-1 a").attr("selectname",""),loadpro()}),$("#typebox-2-all").click(function(){$("#type-2 a").html($(this).html()),$(this).parent().parent().find("a").removeClass("on"),$(this).addClass("on"),$("#typebox-2,#tipbg").hide(),$("#type-2 a").attr("selecetval",""),loadpro()}),$("#typebox-3-all").click(function(){$("#type-3 a").html($(this).html()),$(this).parent().parent().find("a").removeClass("on"),$(this).addClass("on"),$("#typebox-3,#tipbg").hide(),$("#type-3 a").attr("selecetval","0"),loadpro()}),$("#typebox-4-all").click(function(){$("#type-4 a").html($(this).html()),$(this).parent().parent().find("a").removeClass("on"),$(this).addClass("on"),$("#typebox-4,#tipbg").hide(),$("#type-4 a").attr("selecetval","0"),loadpro()}),$(".select-type li").not(".select-type-line").click(function(){$(this).addClass("curr").siblings().removeClass("curr")}),$("#tipbg").click(function(){document.body.removeEventListener("touchmove",preventScroll),$(".select-list-box").hide(),$(this).hide(),$(".select-type li").removeClass("curr")}),e("typebox-1"),e("typebox-2"),e("typebox-3"),e("typebox-4")}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},window.onscroll=function(){getScrollTop()+getWindowHeight()+100>=getScrollHeight()&&"0"==power&&(page++,power="1",loadpro())};